# What is CyBench

**CyBench** is a Java Benchmark based on [JMH](https://openjdk.java.net/projects/code-tools/jmh/), designed to help developers build high performance Java apps. 
Speed-test Java classes, collections, modules, libraries and other application building blocks under varying runtime conditions. 
Share your results with the community, compare and choose the right libraries for your application. **CyBench** helps you be a better developer.

Download and run CyBench [here](https://www.gocypher.com/cybench/downloads).


## Run custom benchmarks using CyBench

### CyBench Launcher

The launcher contains  a default set of tests suggested by CyBench which are executed by default every time. Also execution results by default are submitted to CyBench repository. Once it is there it is possible to see its details using CyBench portal. 
It is possible to skip default tests and report delivery via configuration.

#### CyBench launcher configuration

Configuration located in file `<CyBench home folder>/conf/gocypher-benchmark-client-configuration.properties`

TBD.

#### Add custom benchmark to CyBench launcher

Attachment and run of custom  benchmarks using CyBench launcher is a simple process which consists of a few steps:
 * build  `jar` file with tests which contains `jmh` compiled classes
 * place `jar` file in any folder (preferred the same one where where `gocypher-benchmarks-client.jar` resides)
 * configure CyBench launcher to execute your tests and correctly build the execution results report.  


#### Requirements for custom benchmarks

* Custom benchmarks shall be implemented using `JMH` framework.
* Exported `jar` file shall contain `class` files which are generated by `JMH` framework, usually `jar`file must contain a folder `jmh_generated` with classes having suffix `jmh` in it.
* If any files are created during tests (test data files, results files) run they must be deleted after the iteration or benchmark finishes.

#### Adding custom benchmarks for execution

Update CyBench launcher configuration located in `<CyBench launcher home folder>/conf/gocypher-benchmark-client-configuration.properties`:


* __required__: add or update property `customBenchmarks`, set path to jar file which contains your custom benchmark, this path will be added to the `CLASSPATH` of the JVM. Values must be semicolon separated!  

    Rule:
    ```properties
    customBenchmarks=<path to custom jar file1>;<path to custom jar file2>;
    ```
    
    Example:
    ```properties
    customBenchmarks=gocypher-benchmarks-custom-1.0.0.jar;
    ```

* __optional__: register categories for your tests in order to have correct tests classification and better readability and comparison in CyBench portal. If not set then default value (`Custom`) will be written and all custom tests will reside under this category. Values of different classes must be semicolon separated!

    Rule:
    ```properties
    customBenchmarkMetadata=<fully classified benchmark class name>=category:<category name>;\
      <fully classified benchmark class name>=category:<category name>;
    ```
       
    Example:
    ```properties
    customBenchmarkMetadata=com.gocypher.benchmarks.client.CollectionsBenchmarks=category:Collections;
    ```
    
#### Execute only custom benchmarks

Update CyBench configuration in order to run only custom or defined tests:
* add or update property `benchmarkClasses`, specify class names of tests which shall be executed (values must be comma separated).
    
    Rule:
    ```properties
    benchmarkClasses=<fully qualified class name, or class name>,<fully qualified class name, or class name>
    ```
    Example:
    ```properties
    benchmarkClasses=com.gocypher.benchmarks.client.CollectionsBenchmarks,NumberBenchmarks
    ```

    